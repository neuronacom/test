* { box-sizing:border-box; margin:0; padding:0; }
body, textarea, button, .msg-content {
  font-family: Arial, 'Apple Color Emoji', 'Segoe UI Emoji', 'Noto Color Emoji', 'Noto Emoji', sans-serif;
}
html, body {
  width:100vw; height:100vh; min-height:100vh; min-width:100vw;
  background:#fff; color:#000;
  -webkit-font-smoothing:antialiased;
  -webkit-text-size-adjust:none;
  overflow:hidden;
}
body {
  width:100vw; height:100vh;
  display:flex; flex-direction:column;
  align-items:center; justify-content:flex-start;
  background-color:#fff !important; color:#000 !important;
  transition:background 0.22s cubic-bezier(.38,.85,.48,1.01),color 0.22s;
  position:relative;
  overflow:hidden;
}
#bg {
  position:fixed; top:0; left:0; width:100vw; height:100vh;
  z-index:0; opacity:0;
  transition:opacity 1.4s cubic-bezier(.38,.85,.48,1.01);
  pointer-events:none;
}
#app {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  width: 100%;
  max-width: 360px;
  min-width: 230px;
  min-height: 420px;
  max-height: 92vh;
  height: 88vh;
  margin-top: 95px;
  margin-bottom: 18px;
  z-index:1; opacity:0;
  background: none;
  transition: opacity 1.4s cubic-bezier(.38,.85,.48,1.01);
  box-sizing: border-box;
}
body.shown #bg { opacity:0.27; }
body.shown #app { opacity:1; }
.top-bar {
  width:100vw; position:fixed; top:0; left:0; z-index:10;
  display:flex; align-items:center; justify-content:space-between;
  background:transparent; height:56px; padding:0;
  pointer-events:none; transition:opacity .5s;
}
.top-bar-content {
  display:flex; align-items:center; height:56px; pointer-events:all;
  margin-left:18px;
  position:relative;
}
.top-logo { width:36px; height:auto; margin-right:13px; transition:filter 0.18s;}
.top-title {
  font-size:1.52rem; letter-spacing:.11em; font-weight:bold;
  color:#000; user-select:none;
  text-transform:uppercase;
  transition: color 0.18s;
}
.top-burger {
  display:flex; flex-direction:column; justify-content:center;
  width:36px; height:29px; margin-right:18px;
  cursor:pointer; pointer-events:all; gap:3.2px;
  z-index: 1110;
  transition: background 0.18s;
}
.top-burger span {
  display:block; height:5.6px; width:100%;
  background:#000; border-radius:4px; margin:0; transition:background 0.18s;
}
.top-burger span:last-child { margin-bottom:0; }
.top-bar.hide { opacity:0; pointer-events:none; }
#loader {
  position:fixed; inset:0; background:rgba(255,255,255,0.98);
  display:flex; align-items:center; justify-content:center;
  z-index:1001; flex-direction:column;
  opacity:1;
  transition: opacity .8s cubic-bezier(.33,1.17,.52,1.01), background .41s;
  pointer-events:auto;
  width: 100vw;
  height: 100vh;
}
#loader.hide {
  opacity:0; pointer-events:none;
  transition: opacity 1.3s cubic-bezier(.22,.7,.49,1.01);
}
.loader-content {
  display:flex; align-items:center; justify-content:center;
  animation:fade 8s ease-in-out infinite;
  min-height:140px; min-width:270px;
}
.loader-logo { width:110px; margin-right:18px; image-rendering: auto; transition: filter 0.18s;}
.loader-text { display:flex; flex-direction:column; align-items:center; line-height:1.01; }
.loader-title {
  font-size:5.3rem; font-weight:bold; letter-spacing:.14em; color:#000;
  text-shadow:0 1px 0 #fff, 0 4px 16px #bbb6;
  line-height:0.98; text-transform:uppercase;
  transition: color 0.18s;
}
.loader-subtitle {
  font-size:1.38rem; letter-spacing:.06em; color:#222; margin-top:5px;
  line-height:1.09; font-weight:500;
  transition: color 0.18s;
}
body.dark #loader, body.dark #loader .loader-content {
  background:#17181a !important;
}
body.dark #loaderLogo { filter: invert(1)!important; }
body.dark #loaderTitle, body.dark #loaderSubtitle {
  color: #fff!important;
}
@keyframes fade { 0%,100%{opacity:0;} 50%{opacity:1;} }
.chat-container {
  background:rgba(255,255,255,0.93);
  border-radius:14px; border:1.6px solid #d1d1d1;
  box-shadow:0 7px 36px 0 rgba(30,40,80,0.19), 0 2.5px 10px 0 rgba(50,50,90,0.14);
  display:flex; flex-direction:column; overflow:hidden;
  width:100%; min-width:0; height:100%; min-height: 390px; max-height: 100%;
  transition: box-shadow 0.18s cubic-bezier(.3,.9,.3,1), border 0.18s, background 0.18s, color 0.18s;
  position:relative;
  margin:0 auto 0 auto;
  box-sizing: border-box;
  will-change:background,color,border;
}
#messages {
  flex:1; display:flex; flex-direction:column; padding:15px; overflow-y:auto;
  gap:7px; scroll-behavior: smooth;
  overscroll-behavior: contain;
  min-height: 100px;
  max-height: calc(88vh - 132px);
  box-sizing: border-box;
  transition:none;
  will-change:unset;
}
.message {
  display: flex;
  flex-direction: column;
  align-self: flex-start;
  position:relative;
  background:#e0e0e0;
  margin: 2px 0;
  padding:10px 15px 26px 12px;
  max-width:83%; min-width:70px;
  border-radius:12px 12px 12px 0;
  box-shadow:0 1.5px 5px #ccc3;
  word-break:break-word;
  line-height:1.48;
  font-size:1rem;
  color:#111;
  border:1.2px solid #d7d7d7;
  transition:background 0.18s, border 0.18s, color 0.18s;
  will-change:unset;
}
.message.user {
  align-self:flex-end;
  background:#f5f5f5;
  border-radius:12px 12px 0 12px;
  color:#222;
  border:1.2px solid #d7d7d7;
}
.message.bot  { align-self:flex-start; }
.message.typing {
  font-style:italic; color:#666;
  background: #ebebeb;
  min-width:60px;
  padding-bottom:14px;
  height:38px;
  overflow:hidden;
  display: flex;
  align-items: flex-end;
}
.msg-content { width: 100%; padding-bottom: 3px; transition:none; }
.msg-time {
  position:absolute;
  right:14px;
  bottom:6px;
  font-size:0.8em;
  color:#666;
  opacity:0.88;
  background:none !important;
  padding:0 2px 0 1px;
  border-radius: 6px;
  z-index:10;
  user-select:none;
  font-family:Arial,sans-serif;
  pointer-events: none;
  box-shadow: none;
  transition:.18s;
  display: none;
}
.neurona-title {
  font-weight:bold; font-size:2.05rem; letter-spacing:.10em; display:block;
  text-align:center; margin: 0 0 8px 0; text-transform:uppercase;
}
.input-area {
  display: flex;
  padding: 10px;
  background: #fff;
  align-items: flex-end;
  transition: background 0.18s;
}
body.dark .input-area { background: #1b1c1e; }
#input {
  flex:1; resize:none; border:1px solid #ccc; padding:12px; border-radius:4px; height:50px; font-size:1rem;
  background: none;
  color: inherit;
  transition: background 0.18s, color 0.18s;
}
#send {
  margin-left:8px; padding:0 16px; border:none; border-radius:4px;
  background:#444; color:#fff; font-size:1rem; cursor:pointer; transition:background 0.18s,color 0.18s;
  min-width:44px; min-height:50px; height:50px; display: flex; align-items: center; justify-content: center;
  font-weight:bold;
  border:1.2px solid #d7d7d7;
}
body.dark #send { background:#fff; color:#000; border:1.2px solid #888;}
#send:hover { background:#222; color:#fff; }
body.dark #send:hover { background:#eee; color:#000; }
.save-btn {
  margin: 13px 10px 8px 10px;
  padding:0 16px;
  border:none;
  border-radius:4px;
  background:#444;
  color:#fff;
  font-size:1rem;
  cursor:pointer;
  transition:background 0.23s,color 0.23s,opacity 0.35s, display 0.25s;
  min-width:44px; min-height:44px; height:44px;
  display: flex; align-items: center; justify-content: center;
  font-weight:bold;
  border:1.2px solid #d7d7d7;
  box-shadow: 0 2px 8px #0001;
  opacity:1;
  will-change: opacity, display;
}
.save-btn.hide {
  opacity:0;
  pointer-events: none;
  display: none;
  transition: opacity 0.45s cubic-bezier(.22,.7,.49,1.01), display 0.25s;
}
.save-btn.saving {
  background:#222;
  color:#fff;
  opacity:0.6;
  pointer-events: none;
  transition:background 0.23s, color 0.23s, opacity 0.23s;
}
body.dark .save-btn { background:#fff; color:#000; border:1.2px solid #888;}
.save-btn:hover { background:#222; color:#fff; }
body.dark .save-btn:hover { background:#eee; color:#000; }
.copy-btn {
  position: absolute;
  top: 4px; right: 3px;
  background: none; border: none; cursor: pointer; color: #888; font-size: 1.47em; opacity: 0.95; z-index: 15;
  display:none;
  font-weight:bold;
  filter: drop-shadow(0 0 1.2px #0002);
  line-height:1;
  transition: font-size .22s, color .15s;
}
.message:hover .copy-btn { display:inline; }
.message.user .copy-btn { color:#777; }
.message.bot .copy-btn { color:#000; }
.copy-btn.copied { font-size: 1.03em; color: #51a551; font-weight:normal; }
.copy-btn svg { vertical-align: middle;}
ol, ul {
  margin: 12px 0 12px 15px;
  padding-left: 24px;
}
ol { list-style: decimal inside; }
ul { list-style: disc inside; }
li { margin-bottom: 5px; line-height: 1.5; }
p { margin: 7px 0; }
#scroll-down {
  display:none; position:absolute; left:50%; bottom:93px;
  transform:translateX(-50%);
  background:#fff; color:#222;
  border-radius:50%; box-shadow:0 3px 14px #0001;
  width:47px; height:47px; align-items:center; justify-content:center;
  cursor:pointer; font-size:2.4rem; border:none; outline:none;
  transition:.3s cubic-bezier(.5,1.6,.4,1);
  opacity:0.93;
  z-index:99;
  border: 2.2px solid #eee;
  font-weight: bold;
  padding:0;
}
#scroll-down svg {
  width:27px; height:27px; display:block; stroke-width:4.2px;
  margin: 0 auto;
  transition:transform .48s cubic-bezier(.6,.8,.3,1.2);
}
#scroll-down.show { display:flex; }
#scroll-down:active svg, #scroll-down.down-anim svg { transform: translateY(7px) scale(1.12); }
#scroll-down:hover { background:#f0f0f0; }
.side-menu-bg {
  position: fixed; inset: 0;
  background: rgba(0,0,0,0.22);
  z-index: 1101;
  opacity: 0; pointer-events: none;
  transition: opacity .30s;
}
.side-menu-bg.active {
  opacity: 1; pointer-events: auto;
}
.side-menu {
  position: fixed; top: 0; right: 0;
  width: 56vw; max-width: 420px; min-width: 230px;
  height: 100vh;
  background: var(--side-bg, #fff);
  color: var(--side-txt, #222);
  z-index: 1102;
  box-shadow: -9px 0 38px #0002;
  transform: translateX(120%);
  transition: transform .44s cubic-bezier(.64,.03,.32,1), background .22s, color .22s;
  display: flex; flex-direction: column;
  border-radius: 25px 0 0 25px;
  padding: 28px 0 0 0;
  overflow-y: auto;
  border-left: 1.8px solid #ededed;
}
.side-menu.active { transform: translateX(0); }
.side-menu-list {
  display: flex; flex-direction: column;
  gap: 2px; margin: 0 0 18px 0; padding: 0 24px;
}
.side-menu-item {
  padding: 15px 0 12px 7px;
  font-size: 1.15rem;
  font-weight: bold;
  border-bottom: 1px solid #ececec;
  cursor: pointer; user-select: none;
  display: flex; align-items: center;
  gap: 12px;
  transition: background .15s;
  position: relative;
}
.side-menu-item:last-child { border-bottom: none; }
.side-menu-item:active { background: #f7f7fa; }
.side-arrow {
  margin-left: 6px;
  transition: transform .22s;
  opacity: 0.7;
  width: 18px;
  height: 18px;
  display:inline;
}
.side-menu-item.with-arrow .side-arrow { display:inline;}
.side-menu-item .side-arrow { display:inline;}
.side-menu-section {display:none;}
.settings-group {
  display:none; flex-direction:column; gap:0; margin:0; padding:0 0 0 0;
  margin-bottom: 0;
  border-top:none;
}
.settings-group.open { display:flex; }
.side-switch-row {
  display: flex; align-items: center; justify-content: space-between;
  padding: 8px 0 8px 7px;
  border-bottom: none;
}
.side-switch-label { font-size: 1.06rem; font-weight: bold; display:flex; align-items:center;}
.switch {
  width: 52px; height: 30px;
  border-radius: 18px;
  position: relative; cursor: pointer;
  margin-left: 5px;
  flex-shrink: 0;
  box-shadow: 0 1.5px 4px #0001;
  display: flex; align-items: center;
  transition: background 0.17s, border 0.17s;
  overflow: visible;
  will-change:unset;
  border: 1.4px solid #bcbcbc;
  background: #e3e3e7;
}
.switch.on { background: #f6f6f8; border-color: #a3a3a7; }
.switch.notif { background: #e3e3e7; border-color:#bcbcbc; }
.switch.notif.on { background: #f6f6f8; border-color: #a3a3a7; }
.switch.theme { background: #e3e3e7; border-color:#bcbcbc; }
.switch.theme.on { background: #23242a; border-color: #545458; }
.switch-inner {
  width: 28px; height: 28px;
  position: absolute; left: 1.4px; top: -1px;
  box-shadow: 0 2.5px 12px #bbb2;
  transition: left .18s cubic-bezier(.64,.03,.32,1), background .16s, border .16s;
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  will-change:unset;
  border-width: 1.8px;
  border-style: solid;
  background: #fff;
  border-color: #d2d2d2;
}
.switch.on .switch-inner { left: 22px; }
.switch:not(.on) .switch-inner { left: 1.4px; }
.switch.theme .switch-inner { background: #fff; border-color: #d2d2d2; }
.switch.theme.on .switch-inner { background: #fff; border-color: #d2d2d2; }
.switch.notif .switch-inner { background: #fff; border-color: #d2d2d2; }
.switch.notif.on .switch-inner { background: #fff; border-color: #d2d2d2; }
.switch-icon {
  width: 18px; height: 18px; display: flex; align-items: center; justify-content:center;
  pointer-events:none; user-select:none;
  opacity: 0.9; transition: opacity .15s;
  position: absolute; left: 5px; top: 4px;
}
.switch.theme .switch-inner .switch-icon.sun { display:inline;}
.switch.theme .switch-inner .switch-icon.moon { display:none;}
.switch.theme.on .switch-inner .switch-icon.sun { display:none;}
.switch.theme.on .switch-inner .switch-icon.moon { display:inline;}
.switch.theme .switch-inner .switch-icon { left: 5px; top: 4px; right:unset; }
.switch.theme.on .switch-inner .switch-icon { left: 5px; top: 4px; right:unset; }
body.dark {
  background: #17181a !important; color: #f2f2f2 !important;
  transition: background 0.22s cubic-bezier(.38,.85,.48,1.01),color 0.22s;
}
body.dark #app,
body.dark .chat-container {
  background: #1b1c1e !important; color: #ececec;
  border-color: #323232;
  transition: background 0.18s, color 0.18s, border 0.18s;
}
body.dark .message, body.dark .message.user {
  background: #242428;
  color: #f5f5f7;
  border-color: #545458;
  transition: background 0.18s, color 0.18s, border 0.18s;
}
body.dark .message.user { background: #28282c; color: #eaeaea; }
body.dark .side-menu {
  --side-bg:#16171a; --side-txt:#eee; --side-muted:#999;
  background: #16171a; color: #eee;
  border-left: 2.3px solid #323232;
}
body.dark .side-menu-item { border-bottom: 1.3px solid #23232b; color: #fff; }
body.dark .side-menu-item:active { background: #23232b; }
body.dark .side-switch-row, body.dark .side-menu-section { color: #bfc7d2; }
.side-close-btn {
  position: absolute; top: 12px; right: 17px;
  width: 41px; height: 41px;
  background: none; border: none;
  font-size: 2.17rem; color: #888;
  cursor: pointer; border-radius: 100%;
  transition: background .15s;
  z-index: 1122;
  display: flex; align-items: center; justify-content: center;
}
.side-close-btn:active { background: #eee; }
body.dark .side-close-btn { color: #aaa; }
.side-langs {
  position: static;
  max-height: 0;
  overflow: hidden;
  border-radius: 14px;
  box-shadow: 0 3px 14px #0002;
  background: var(--side-bg, #fff);
  margin: 0 0 0 0;
  border: 1.1px solid #eee;
  left: 0; right: 0;
  z-index: 1111;
  display: block;
  width: 100%;
  opacity:0; pointer-events:none;
  transition: max-height 0.34s cubic-bezier(.4,0,.7,1), opacity 0.24s cubic-bezier(.4,0,.7,1);
}
.side-langs.show {
  max-height: 1000px;
  opacity:1;
  pointer-events:auto;
  padding: 2px 0 6px 0;
  overflow: visible;
  margin-bottom: 15px;
}
.side-lang-item {
  padding: 13px 15px; font-size: 1.08rem;
  cursor: pointer;
  color: var(--side-txt, #111);
  transition: background .13s, color .13s;
  border-radius: 8px;
  user-select: none;
  font-weight: bold;
  display: flex; align-items: center;
}
.side-lang-item.active, .side-lang-item:active {
  background: #ededed;
  color: #242428;
}
body.dark .side-langs { background: #16171a; border-color:#23252a; }
body.dark .side-lang-item { color: #eee; }
body.dark .side-lang-item.active, body.dark .side-lang-item:active {
  background: #262b35; color: #fff;
}
.side-lang-arrow {
  margin-left: 6px;
  width: 14px; height: 14px;
  opacity: 0.7;
  display: inline-block;
  vertical-align: middle;
  transition: transform .22s;
}
.side-lang-arrow.open { transform:rotate(180deg);}
.curr-lang-gray {
  color: #888;
  font-size: 0.93em;
  margin-left: 6px;
  font-weight: normal;
  opacity: 0.77;
}
.notif-popup {
  position:fixed;
  left:50%; top:19%;
  transform:translate(-50%,-50%);
  min-width:210px; max-width:88vw;
  background:#0e0; color:#fff;
  border-radius:13px; box-shadow:0 2px 15px #0003;
  font-size:1.1rem; font-weight:bold;
  z-index:22222;
  padding:18px 22px 18px 20px;
  opacity:0; pointer-events:none; transition:.26s;
  display:flex; align-items:center; gap:13px;
}
.notif-popup.show {opacity:1; pointer-events:all;}
.notif-popup svg{width:31px; height:31px;}
.typing-dots {
  display: inline-flex;
  gap: 2.7px;
  vertical-align: middle;
  align-items: flex-end;
}
.tdot {
  display: inline-block;
  width: 7px;
  height: 7px;
  background: #bbb;
  border-radius: 50%;
  opacity: .7;
  animation: tdotbounce 1.1s infinite;
  margin-right: 2px;
}
.tdot1 { animation-delay: 0s;}
.tdot2 { animation-delay: 0.15s;}
.tdot3 { animation-delay: 0.33s;}
@keyframes tdotbounce {
  0%,80%,100% { transform: translateY(0); opacity: .66; }
  35% { transform: translateY(-7px); opacity: 1;}
  50% { opacity: 1;}
}
@media(max-width:600px){
  .top-bar{height:38px;}
  .top-bar-content{height:38px; margin-left:7px;}
  .top-logo{width:22px; margin-right:7px;}
  .top-title{font-size:1.03rem;}
  .top-burger{width:27px; height:18px; margin-right:7px;}
  .top-burger span{height:3.3px;}
  #app { max-width:94vw; min-width:0; padding:0 0 7px 0; height:84vh; margin-top:79px; }
  .chat-container { min-width:0; max-width:100vw; min-height:150px; height:100%;}
  #messages { min-height:60px; max-height:calc(84vh - 110px);}
  .loader-logo { width:70px; margin-right:7px; }
  .loader-title { font-size:2.4rem; }
  .loader-subtitle { font-size:.98rem; }
  #input { font-size:.89rem; height:38px; }
  #send { font-size:.89rem; padding:0 10px; min-width:34px; min-height:38px; height:38px;}
  #scroll-down { width:35px; height:35px; font-size:1.3rem; bottom:82px;}
  #scroll-down svg { width:20px; height:20px; }
  #loader { min-height:280px; }
  .side-menu{ width:80vw; min-width:0; }
  .side-langs{ left: 0; right: 0; }
}
@media (max-width:400px){
  .loader-title{font-size:1.2rem;}
  #app{max-width:98vw;}
  .chat-container{min-height:80px;}
}
@media (max-height:450px){
  #app{min-height:100px; height:54vh;}
  .chat-container{min-height:60px;}
  #messages{min-height:35px;}
}
.ai-version-selector {
  position: relative;
  display: flex;
  align-items: center;
  margin-left: 7px;
  z-index: 100;
}
.ai-version-btn {
  background: none;
  border: none;
  outline: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  font-size: 1.17rem;
  font-weight: bold;
  color: inherit;
  padding: 0 4px;
  margin-left: 0;
  outline: none !important;
}
.ai-version-arrow {
  margin-left: 2px;
  width: 18px;
  height: 18px;
  transition: transform .22s;
  opacity: 0.7;
  display: inline;
}
.ai-version-popup {
  position: absolute;
  left: 0;
  top: 44px;
  min-width: 220px;
  background: #fff;
  color: #222;
  border-radius: 12px;
  box-shadow: 0 3px 18px #0002;
  border: 1.2px solid #d7d7d7;
  z-index: 2222;
  display: none;
  flex-direction: column;
  align-items: flex-start;
  padding: 0 0 8px 0;
  animation: fade 0.4s;
}
.ai-version-popup.show {
  display: flex;
}
.ai-version-item {
  padding: 13px 16px 7px 22px;
  cursor: pointer;
  font-size: 1.06rem;
  font-weight: bold;
  transition: background .14s, color .14s;
  border-radius: 9px;
  color: #222;
  background: none;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  margin-bottom: 3px;
}
.ai-version-item.active,
.ai-version-item:active {
  background: #ededed;
  color: #242428;
}
.ai-version-item .popup-title {
  margin: 0;
  font-size: 1.12em;
  font-weight: bold;
}
.ai-version-item .popup-desc {
  margin: 0;
  color: #888;
  font-size: .95em;
  font-weight: normal;
  letter-spacing: .01em;
}
body.dark .ai-version-popup {
  background: #17181a;
  color: #eee;
  border-color: #23232b;
}
body.dark .ai-version-item {
  color: #eee;
}
body.dark .ai-version-item.active,
body.dark .ai-version-item:active {
  background: #262b35;
  color: #fff;
}
.top-burger {
  display:flex; flex-direction:column; justify-content:center;
  width:36px; height:29px; margin-right:18px;
  cursor:pointer; pointer-events:all; gap:3.2px;
  z-index: 1110;
  transition: background 0.18s;
}
.top-burger span {
  display:block; height:5.6px; width:100%;
  background:#000; border-radius:4px; margin:0; transition:background 0.18s;
}
.top-burger span:last-child { margin-bottom:0; }
.top-bar.hide { opacity:0; pointer-events:none; }
